(this.webpackJsonpentryman=this.webpackJsonpentryman||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(41),o=n.n(a),s=(n(54),n(13)),c=n(8),l=n(9),d=n(17),h=n(11),u=n(10),p=(n(55),n(39)),b=n.n(p),f=n(2),m=n(49),j=n(1),g=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).onDrop=void 0,i.baseStyle={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:10,borderColor:"magenta",borderStyle:"dashed",backgroundColor:"lightgrey",color:"black",fontStyle:"italic",outline:"none",transition:"border .24s ease-in-out"},i.activeStyle={borderColor:"#2196f3"},i.acceptStyle={borderColor:"#00e676"},i.rejectStyle={borderColor:"#ff1744"},i.onDrop=function(e){console.log(e);for(var t=0;t<e.length;t++)i.props.parser(e[t]);i.setState({files:e})},i.state={files:[]},i}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsx)(m.a,{onDrop:this.onDrop,children:function(t){var n=t.getRootProps,i=t.getInputProps;return Object(j.jsx)("section",{className:"container",children:Object(j.jsxs)("div",Object(f.a)(Object(f.a)({},n({className:"dropzone",style:e.baseStyle})),{},{children:[Object(j.jsx)("input",Object(f.a)({},i())),Object(j.jsx)("p",{children:"Drop csv file(s) here or click to open file browser."})]}))})}})}}]),n}(i.Component),x=n(16);function O(e){var t,n=[],i=Math.max.apply(Math,Object(s.a)(e.map((function(e){return e.StartNo?e.StartNo:0}))));t=i>1001?i+1:1001;var r,a=Object(x.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.StartNo||(o.StartNo=t,t++),n.push(C(o))}}catch(c){a.e(c)}finally{a.f()}return n}function C(e){if(!e.StartNo)throw new Error("Start number is required");return{Stno:e.StartNo,Chipno:e.Epunch.toString(),"Database Id":null,Surname:e.LastName,"First name":e.FirstName,S:e.Sex,nc:e.NonCompetitive?1:0,Classifier:0,City:e.Club,Short:e.ClassId,Rented:e.EpunchRented?"X":null,"Start fee":0,Paid:"X"}}var y=["OE0001","Stno","XStno","Chipno","Database Id","Surname","First name","YB","S","Block","nc","Start","Finish","Time","Classifier","Credit -","Penalty +","Comment","Club no.","Cl.name","City","Nat","Location","Region","Cl. no.","Short","Long","Entry cl. No","Entry class (short)","Entry class (long)","Rank","Ranking points","Num1","Num2","Num3","Text1","Text2","Text3","Addr. surname","Addr. first name","Street","Line2","Zip","Addr. city","Phone","Mobile","Fax","EMail","Rented","Start fee","Paid","Team","Course no.","Course","km","m","Course controls"],v=["OEScore0001","Stno","XStno","Chipno","Database Id","Surname","First name","YB","S","Block","nc","Start","Finish","Time","Classifier","Credit -","Penalty +","Comment","Club no.","Cl.name","City","Nat","Location","Region","Cl. no.","Short","Long","Entry cl. No","Entry class (short)","Entry class (long)","Rank","Ranking points","Num1","Num2","Num3","Text1","Text2","Text3","Addr. surname","Addr. first name","Street","Line2","Zip","Addr. city","Phone","Mobile","Fax","EMail","Rented","Start fee","Paid","Team","Course no.","Course","km","m","Course controls"],S=n(68),w=n(69),E=n(70),k=n(71),N=n(72),R=n(48),L=n(46),F=n(73);function P(e){return 9===Object.keys(e).length&&"Bib #"in e&&"SI Card"in e&&"Rent"in e&&"First Name"in e&&"Last Name"in e&&"Gen"in e&&"School"in e&&"Course"in e&&"NC"in e}function T(e){return 14===Object.keys(e).length&&"FirstName"in e&&"LastName"in e&&"Email"in e&&"Club"in e&&"Class"in e&&"Sex"in e&&"EPunch"in e&&"Phone"in e&&"EmergencyPhone"in e&&"CarLicense"in e&&"Newcomer"in e&&"Group"in e&&"Paid"in e&&"Owed"in e}var I=function(){function e(){Object(c.a)(this,e),this.StartNo=void 0,this.Epunch=void 0,this.EpunchRented=void 0,this.FirstName=void 0,this.LastName=void 0,this.Club=void 0,this.Course=void 0,this.ClassId=void 0,this.NonCompetitive=void 0,this.Sex=void 0,this.Phone=void 0,this.EmergencyPhone=void 0,this.CarLicense=void 0,this.Newcomer=void 0,this.Group=void 0,this.Paid=void 0,this.Owed=void 0}return Object(l.a)(e,[{key:"fromWiolEntryCsv",value:function(e){return this.StartNo=e["Bib #"],this.Epunch=e["SI Card"],this.EpunchRented="X"===e.Rent,this.FirstName=e["First Name"],this.LastName=e["Last Name"],this.Club=e.School,this.Course="",this.ClassId=e.Course,this.NonCompetitive="X"===e.NC,this.Sex=e.Gen,this.Phone="",this.EmergencyPhone="",this.CarLicense="",this.Newcomer="unknown",this.Group=1,this.Paid="unknown",this.Owed=0,this}},{key:"fromCascadeRegistrationCsv",value:function(e){return this.StartNo=null,this.Epunch=e.EPunch,this.EpunchRented=""===e.EPunch,this.FirstName=e.FirstName,this.LastName=e.LastName,this.Club=e.Club,this.Course="",this.ClassId=e.Class,this.NonCompetitive=!1,this.Sex=e.Sex,this.Phone=e.Phone,this.EmergencyPhone=e.EmergencyPhone,this.CarLicense=e.CarLicense,this.Newcomer=e.Newcomer,this.Group=e.Group?e.Group:1,this.Paid=e.Paid,this.Owed=e.Owed?e.Owed:0,this}}]),e}();var D=n.p+"static/media/LostTimeWordmark.2977d17a.svg",B=n.p+"static/media/mapmontageblur.c977ea5b.jpg",M=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsx)(S.a,{children:Object(j.jsx)("nav",{className:"nav-bar",style:{backgroundImage:"url(".concat(B,")"),backgroundRepeat:"repeat-xy",marginBottom:"20px"},children:Object(j.jsx)(w.a,{xs:{span:10,offset:1},children:Object(j.jsx)("div",{className:"nav-img",style:{paddingTop:"5px",paddingBottom:"5px"},children:Object(j.jsx)("a",{href:"/",children:Object(j.jsx)("img",{src:D,alt:"Lost Time Orienteering",style:{height:"60px",margin:"0px"}})})})})})})}}]),n}(r.a.Component),z=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{style:{},children:this.props.title}),Object(j.jsx)("div",{style:{width:"100%",height:"2px",backgroundColor:"magenta",marginTop:"10px",marginBottom:"10px"}})]})}}]),n}(r.a.Component),W=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:this.props.value.FirstName}),Object(j.jsx)("td",{children:this.props.value.LastName}),Object(j.jsx)("td",{children:this.props.value.Epunch}),Object(j.jsx)("td",{style:{textAlign:"center"},children:this.props.value.EpunchRented?"yes":"no"}),Object(j.jsx)("td",{children:this.props.value.ClassId}),Object(j.jsx)("td",{children:this.props.value.StartNo})]})}}]),n}(r.a.Component),A=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.props.failed>0?Object(j.jsxs)("li",{children:[this.props.name," (Found: ",this.props.success,", Failed: ",this.props.failed,")"]}):Object(j.jsxs)("li",{children:[this.props.name," (Found: ",this.props.success,")"]})}}]),n}(r.a.Component),G=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)(w.a,{xs:4,sm:3,md:4,lg:3,children:[Object(j.jsx)("b",{children:this.props.classname}),": ",this.props.regcount]})}}]),n}(r.a.Component),V=n(43);function X(e){return[{table:{widths:[12],heights:[10],body:[[{text:e.Owed>0?{text:"$".concat(e.Owed.toString()),color:"#999999",fontSize:7}:" ",border:[!0,!0,!0,!0]}]]}},{text:e.FirstName,fontSize:11},{text:e.LastName,fontSize:11},e.Owed>0?{text:"$".concat(e.Owed.toString()),fontSize:11,bold:!0}:"",{text:e.ClassId,fontSize:11},0===e.Epunch.length?{table:{widths:[100],heights:[25],body:[[{border:[!0,!0,!0,!0],alignment:"right",columns:[{width:"*",text:" "},{width:"auto",table:{widths:[4],heights:[4],body:[[{text:" ",border:[!1,!1,!1,!1]}]]},layout:{fillColor:"#CCCCCC"}}]}]]},layout:{hLineWidth:function(){return 1.5},vLineWidth:function(){return 1.5},hLineColor:function(){return"black"},vLineColor:function(){return"black"}}}:{text:e.Epunch,fontSize:11,alignment:"right"},{text:e.Club,fontSize:11},{text:J(e.Phone),fontSize:11},{text:J(e.EmergencyPhone),fontSize:11},{text:e.CarLicense,fontSize:8}]}function J(e){var t=(""+e).replace(/\D/g,""),n=t.match(/^(1|)?(\d{3})(\d{3})(\d{4})$/);return n?["(",n[2],") ",n[3],"-",n[4]].join(""):t}var Y=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={filesprocessed:[],entries:[],nextstartno:1e3},i.downloadOeRegCsv=i.downloadOeRegCsv.bind(Object(d.a)(i)),i.updateEntries=i.updateEntries.bind(Object(d.a)(i)),i.handleClearEntries=i.handleClearEntries.bind(Object(d.a)(i)),i.nowtimestring=i.nowtimestring.bind(Object(d.a)(i)),i.downloadpdf=i.downloadpdf.bind(Object(d.a)(i)),i}return Object(l.a)(n,[{key:"handleClearEntries",value:function(){this.setState({entries:[],filesprocessed:[]})}},{key:"downloadOeRegCsv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0!==this.state.entries.length){var t=O(this.state.entries);this.setState({entries:this.state.entries});var n={quotes:!1,delimiter:";",header:!0,skipEmptyLines:"greedy",columns:e?v:y},i=b.a.unparse(t,n),r=this.nowtimestring(),a=document.createElement("a");a.href="data:text/csv;charset=utf-8,"+encodeURI(i),a.target="_blank",a.download="EntriesForOe-".concat(r,".csv"),a.click()}else console.log("No entries")}},{key:"nowtimestring",value:function(){var e=new Date,t=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return t.concat(n,i,"T",r,a)}},{key:"updateEntries",value:function(e){var t=this;b.a.parse(e,{header:!0,transform:function(e,t){return e.replace(/\0/g,"").trim()},complete:function(e,n){var i=function(e,t){var n,i=[],r=0,a=0,o=Object(x.a)(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(P(c)){var l=(new I).fromWiolEntryCsv(c);i.push(l)}else if(T(c)){var d=(new I).fromCascadeRegistrationCsv(c);i.push(d)}else Object.keys(c).length<=1?(console.log(Object.keys(c)),console.log("empty row"),r+=1):(console.log(Object.keys(c)),console.log("failed to parse row"),a+=1)}}catch(h){o.e(h)}finally{o.f()}return{data:i,meta:{success:i.length,failed:a,empty:r,maxstartno:Math.max.apply(Math,Object(s.a)(i.map((function(e){return e.StartNo?e.StartNo:1001}))))}}}(e.data,t.state.nextstartno),r=t.state.entries.concat(i.data);t.setState({entries:r,nextstartno:i.meta.maxstartno});var a={name:n.name,success:i.meta.success,failed:i.meta.failed,empty:i.meta.empty};t.setState({filesprocessed:[].concat(Object(s.a)(t.state.filesprocessed),[a])})}})}},{key:"downloadpdf",value:function(){var e=function(e){var t=[[" ","First","Last","Owed","Course","Epunch","Club","Phone","Emergency Ph.","Vehicle"]],n=[[" ","First","Last","Owed","Course","Epunch","Club","Phone","Emergency Ph.","Vehicle"]],i=[[" ","First","Last","Owed","Course","Epunch","Club","Phone","Emergency Ph.","Vehicle"]],r=e.filter((function(e){return e.Epunch.length>0})).map(X),a=e.filter((function(e){return 0===e.Epunch.length})).map(X),o=e.filter((function(e){return 0===e.Epunch.length})).map(X);function c(e,t){return e[2].text&&t[2].text?e[2].text.localeCompare(t[2].text):e[2].text?1:-1}function l(){var e=new Date,t=e.getFullYear().toString(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],i=e.getDate().toString().padStart(2,"0"),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return a.concat(":",o," ",r," ",i," ",n,", ",t)}t.push.apply(t,Object(s.a)(r)),n.push.apply(n,Object(s.a)(a)),i.push.apply(i,Object(s.a)(o)),t.sort(c),n.sort(c),n.sort(c);var d={pageSize:"LETTER",pageOrientation:"landscape",footer:function(e,t){return{text:"Created: "+l(),fontSize:8,margin:[50,0,0,0]}},content:[{text:"Pre-Registration List: OWNED punches",bold:!0,fontSize:15,margin:[0,0,0,10]},{text:[{text:"Registration Volunteers: ",italics:!0,bold:!0},"Check off each participant in the first column when they arrive. Please verify course assignment, epunch number, contact, and vehicle information. Collect any money owed and cross out in the owed column when paid."],margin:[0,0,0,10]},{layout:{fillColor:function(e,t,n){return e%2===1?"#EEEEEE":null},paddingLeft:function(e,t){return 4},paddingRight:function(e,t){return 4},paddingTop:function(e,t){return 6},paddingBottom:function(e,t){return 4},hLineWidth:function(e,t){return 0===e||e===t.table.body.length?0:e===t.table.headerRows?2:0},vLineWidth:function(e){return.5},hLineColor:function(e){return 1===e?"black":"white"},vLineColor:function(e){return"white"}},table:{headerRows:1,dontBreakRows:!0,body:t},pageBreak:"after"},{text:"Pre-Registration List: RENTAL punches (list A)",bold:!0,fontSize:15,margin:[0,0,0,10]},{text:[{text:"Registration Volunteers: ",italics:!0,bold:!0},"Check off each participant in the first column when they arrive. Write the rental epunch number in the large box but do not check the shaded box. Please verify course assignment, contact, and vehicle information. Collect any money owed and cross out in the owed column when paid."],margin:[0,0,0,10]},{text:[{text:"Finish Volunteers: ",italics:!0,bold:!0},"Find any epunch numbers that haven't been checked off. Find the corresponding registration in the computer, add the epunch number from this page, and check it off. Return this list to registration."],margin:[0,0,0,10]},{layout:{fillColor:function(e,t,n){return e%2===1?"#EEEEEE":null},paddingLeft:function(e,t){return 4},paddingRight:function(e,t){return 4},paddingTop:function(e,t){return 2},paddingBottom:function(e,t){return 2},hLineWidth:function(e,t){return 0===e||e===t.table.body.length?0:e===t.table.headerRows?2:1},vLineWidth:function(e){return 0},hLineColor:function(e){return 1===e?"black":"white"}},table:{headerRows:1,body:n},pageBreak:"after"},{text:"Pre-Registration List: RENTAL punches (list B)",bold:!0,fontSize:15,margin:[0,0,0,10]},{text:[{text:"Registration Volunteers: ",italics:!0,bold:!0},"Check off each participant in the first column when they arrive. Write the rental epunch number in the large box but do not check the shaded box. Please verify course assignment, contact, and vehicle information. Collect any money owed and cross out in the owed column when paid."],margin:[0,0,0,10]},{text:[{text:"Finish Volunteers: ",italics:!0,bold:!0},"Find any epunch numbers that haven't been checked off. Find the corresponding registration in the computer, add the epunch number from this page, and check it off. Return this list to registration."],margin:[0,0,0,10]},{layout:{fillColor:function(e,t,n){return e%2===1?"#EEEEEE":null},paddingLeft:function(e,t){return 4},paddingRight:function(e,t){return 4},paddingTop:function(e,t){return 2},paddingBottom:function(e,t){return 2},hLineWidth:function(e,t){return 0===e||e===t.table.body.length?0:e===t.table.headerRows?2:1},vLineWidth:function(e){return 0},hLineColor:function(e){return 1===e?"black":"white"}},table:{headerRows:1,body:i}}]};return V.createPdf(d,{},{Roboto:{normal:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Regular.ttf",bold:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Medium.ttf",italics:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Italic.ttf",bolditalics:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-MediumItalic.ttf"}})}(this.state.entries),t="Registrations-".concat(this.nowtimestring(),".pdf");e.download(t)}},{key:"render",value:function(){var e=this,t=this.state.entries.length>0?this.state.entries.map((function(e){return Object(j.jsx)(W,{value:e})})):Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:6,style:{textAlign:"center"},children:"No Registrations to Show"})}),n=this.state.filesprocessed.map((function(e){return Object(j.jsx)(A,{name:e.name,success:e.success,failed:e.failed,empty:e.empty})})),i=this.state.entries.reduce((function(e,t){return e[t.ClassId]?e[t.ClassId]++:e[t.ClassId]=1,e}),{}),r=Object.entries(i).sort((function(e,t){return e[0].toLocaleLowerCase().localeCompare(t[0].toLocaleLowerCase())})).map((function(e){return Object(j.jsx)(G,{classname:e[0],regcount:e[1]})}));return Object(j.jsxs)("div",{children:[Object(j.jsx)(z,{title:"Pre-Process Registration Files"}),Object(j.jsx)("p",{children:"Save event registration information in .csv format. Upload multiple files to combine registration information from multiple sources. (Todo: click to expand for supported csv formats)"}),Object(j.jsx)("p",{children:"This tool creates outputs ready for import into SportSoftware (OE) and PDF files to print and use at check-in."}),Object(j.jsx)("h4",{children:"Files"}),Object(j.jsx)("p",{children:Object(j.jsx)(g,{parser:this.updateEntries})}),Object(j.jsxs)(S.a,{children:[Object(j.jsxs)(w.a,{xs:12,md:6,children:[Object(j.jsxs)(S.a,{children:[Object(j.jsxs)("p",{children:["Files Uploaded: ",this.state.filesprocessed.length]}),Object(j.jsx)("p",{children:Object(j.jsx)("ul",{children:n})}),Object(j.jsxs)("p",{children:["Registrations by Class (Total: ",this.state.entries.length,")"]}),Object(j.jsx)("p",{children:Object(j.jsx)(S.a,{children:r})})]}),Object(j.jsx)(S.a,{children:Object(j.jsxs)(E.a,{children:[Object(j.jsx)(k.a,{className:"me-2",children:Object(j.jsxs)(N.a,{title:"Download OE File",variant:"primary",disabled:!(this.state.entries.length>0),children:[Object(j.jsx)(R.a.Item,{onClick:function(){return e.downloadOeRegCsv()},children:"Regular"}),Object(j.jsx)(R.a.Item,{onClick:function(){return e.downloadOeRegCsv(!0)},children:"Score O"})]})}),Object(j.jsx)(k.a,{className:"me-2",children:Object(j.jsx)(L.a,{variant:"primary",onClick:this.downloadpdf,disabled:!(this.state.entries.length>0),children:"Download Check-In PDF"})}),Object(j.jsx)(k.a,{children:Object(j.jsx)(L.a,{variant:"outline-secondary",onClick:this.handleClearEntries,children:"Clear Registrations"})})]})})]}),Object(j.jsx)(w.a,{xs:6,md:6,children:Object(j.jsxs)("table",{style:{textAlign:"left"},children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"First"}),Object(j.jsx)("th",{children:"Last"}),Object(j.jsx)("th",{children:"Chip"}),Object(j.jsx)("th",{children:"Rented?"}),Object(j.jsx)("th",{children:"Class"}),Object(j.jsx)("th",{children:"Start #"})]})}),Object(j.jsx)("tbody",{children:t})]})})]})]})}}]),n}(r.a.Component);var U=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(F.a,{fluid:!0,style:{backgroundColor:"#F7F7F7"},children:[Object(j.jsx)(M,{}),Object(j.jsx)(S.a,{children:Object(j.jsx)(w.a,{xs:{span:10,offset:1},children:Object(j.jsx)(Y,{})})})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};n(62);o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(U,{})}),document.getElementById("root")),$()}},[[63,1,2]]]);
//# sourceMappingURL=main.acf970cd.chunk.js.map